<h1 align="center"> Seerch Hotels Bot

![Telegram URL](https://cdn-icons-png.flaticon.com/256/5968/5968804.png)
</h1>

***
## Краткое описание

Telegram-бот для анализа сайта [Hotels.com](https://www.hotels.com/) и поиска подходящих пользователю отелей. Работает с API от [Hotels.com](https://www.hotels.com/)

Программа написана на языке **Python** в рамках курсовой работы к курсу Python-basic от Skillbox.

- **Language** (язык): Russian
- **Author** (Автор): [Никита Федоров](https://t.me/Derlonger)

**Демонстрация работы программы:** [смотреть видео >>](https://youtu.be/RQasp8m9_yk)


## Как запустить бота:
- Скачать скрипт и распаковать архив
- Установить зависимости: `pip install -r requirements.txt`
- Создать telegram-бота у [BotFather](https://t.me/BotFather) и получить токен
  - Необходимо найти **BotFather** в Telegram, либо перейти по ссылке сверху.
  - Ввести команду **/newbot**.
  - Ввести имя бота
  - Теперь необходимо ввести **username** бота, необходимо что-бы он заканчивался на 'bot'.
  - После чего бот сообщит вам **TOKEN** и даст ссылку на вашего бота.
- Получить ключ от rapidapi:
    - Зарегистрироваться на сайте [rapidapi.com](https://rapidapi.com/apidojo/api/hotels4/)
    - Перейти в API Marketplace → категория Travel → Hotels (либо просто перейти по прямой ссылке на документацию [Hotels API Documentation](https://rapidapi.com/apidojo/api/hotels4/))
    - Нажать кнопку **Subscribe to Test**
    - Выбрать пакет (есть бесплатный вариант)
    - Забрать KEY
- Создать файл **.env** и прописать там BOT_TOKEN и RAPID_API_KEY так, как это представленно в файле-шаблоне .env.template
- Запустить бота: `python main.py`



## Возможности бота:

**Бот реагирует на команды:**

- **/start** — Запустить бота
- **/help** — Вывести справку
- **/lowprice** — Вывести Топ самых дешёвых отелей в городе
- **/highprice** — Вывести Топ самых дорогих отелей в городе
- **/bestdeal** — Настраиваемый поиск отелей
- **/history** — История поиска

## Принцип работы

После ввода команд **/lowprice** и **/highprice** бот проводит опрос пользователя:
- Город для поездки.
- Количество отелей для вывода результата (максимум 10).
- Количество взрослых от 1 до 14.
- Количество детей от 0 до 6:
  - Возраст каждого ребенка.
- Нужно ли загрузить фото отеля
    - количество фото (максимум 10)
- Дату поездки(Начало и Конец)


При вводе команды **/bestdeal** дополнительно запрашивается:
- **Min** стоимость за сутки и **Max** стоимость.
- **Min** диапазон от центра и **Max** диапазон.


При удачных запросах ведется история поиска. Все запросы и их результат сохраняется в базе данных.

При вводе команды **/history** пользователю предлагается уточнить действие:
- Выдает список выполненных пользователем запросом, но не более 5
- Дату и время ввода команды
- То слово (город), по которому пользователь искал отели
- Если пользователю фотографии были не нужны, то они выведены не будут

## В разработке использованы

pyTelegramBotAPI==4.4.0<br>
python-dotenv==0.19.2<br>
wheel~=0.36.2<br>
certifi~=2022.6.15<br>
requests~=2.28.1<br>
idna~=3.3<br>
urllib3~=1.26.11<br>
setuptools~=57.0.0<br>
loguru~=0.6.0<br>
python-telegram-bot-calendar==1.0.5<br>